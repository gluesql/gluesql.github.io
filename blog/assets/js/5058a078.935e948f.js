"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4746],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>p});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),u=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},c=function(e){var t=u(e.components);return a.createElement(l.Provider,{value:t},e.children)},d="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,c=r(e,["components","mdxType","originalType","parentName"]),d=u(n),m=o,p=d["".concat(l,".").concat(m)]||d[m]||h[m]||i;return n?a.createElement(p,s(s({ref:t},c),{},{components:n})):a.createElement(p,s({ref:t},c))}));function p(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,s=new Array(i);s[0]=m;var r={};for(var l in t)hasOwnProperty.call(t,l)&&(r[l]=t[l]);r.originalType=e,r[d]="string"==typeof e?e:o,s[1]=r;for(var u=2;u<i;u++)s[u]=n[u];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},3885:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>u});var a=n(7462),o=(n(7294),n(3905));const i={title:"Test-Driven Documentation - Automating User Manual Creation in GlueSQL",description:"Test-Driven Documentation - Automating User Manual Creation in GlueSQL",slug:"test-driven-documentation",authors:[{name:"Taehoon Moon",title:"Creator of GlueSQL",url:"https://github.com/panarch",image_url:"https://github.com/panarch.png"}],tags:["ChatGPT","Test-Driven-Documentation","TDD","Database","Documentation","Automation"]},s="Test-Driven Documentation - Automating User Manual Creation in GlueSQL",r={permalink:"/blog/test-driven-documentation",source:"@site/blog/2023-05-30-test-driven-documentation.md",title:"Test-Driven Documentation - Automating User Manual Creation in GlueSQL",description:"Test-Driven Documentation - Automating User Manual Creation in GlueSQL",date:"2023-05-30T00:00:00.000Z",formattedDate:"May 30, 2023",tags:[{label:"ChatGPT",permalink:"/blog/tags/chat-gpt"},{label:"Test-Driven-Documentation",permalink:"/blog/tags/test-driven-documentation"},{label:"TDD",permalink:"/blog/tags/tdd"},{label:"Database",permalink:"/blog/tags/database"},{label:"Documentation",permalink:"/blog/tags/documentation"},{label:"Automation",permalink:"/blog/tags/automation"}],readingTime:9.265,hasTruncateMarker:!1,authors:[{name:"Taehoon Moon",title:"Creator of GlueSQL",url:"https://github.com/panarch",image_url:"https://github.com/panarch.png",imageURL:"https://github.com/panarch.png"}],frontMatter:{title:"Test-Driven Documentation - Automating User Manual Creation in GlueSQL",description:"Test-Driven Documentation - Automating User Manual Creation in GlueSQL",slug:"test-driven-documentation",authors:[{name:"Taehoon Moon",title:"Creator of GlueSQL",url:"https://github.com/panarch",image_url:"https://github.com/panarch.png",imageURL:"https://github.com/panarch.png"}],tags:["ChatGPT","Test-Driven-Documentation","TDD","Database","Documentation","Automation"]},prevItem:{title:"GlueSQL - Revolutionizing Databases by Unifying Query Interfaces",permalink:"/blog/revolutionizing-databases-by-unifying-query-interfaces"},nextItem:{title:"Breaking the Boundary between SQL and NoSQL Databases",permalink:"/blog/breaking-the-boundary-between-sql-and-nosql"}},l={authorsImageUrls:[void 0]},u=[{value:"Introduction: GlueSQL and Test-Driven Documentation",id:"introduction-gluesql-and-test-driven-documentation",level:2},{value:"Test Codes and Documentation",id:"test-codes-and-documentation",level:2},{value:"Leveraging ChatGPT",id:"leveraging-chatgpt",level:2},{value:"Success Case: Automated User Manual of GlueSQL",id:"success-case-automated-user-manual-of-gluesql",level:2},{value:"Future Plans: Fully Automating Documentation Generation",id:"future-plans-fully-automating-documentation-generation",level:2},{value:"Conclusion: The Value of Test-Driven Documentation",id:"conclusion-the-value-of-test-driven-documentation",level:2}],c={toc:u},d="wrapper";function h(e){let{components:t,...i}=e;return(0,o.kt)(d,(0,a.Z)({},c,i,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"introduction-gluesql-and-test-driven-documentation"},"Introduction: GlueSQL and Test-Driven Documentation"),(0,o.kt)("p",null,"Recently, the GlueSQL project reached a significant milestone with the release of version 0.14. This new version brings a host of fresh features to the table, yet one of the most notable changes is in the realm of documentation. For the first time, we're proud to announce the launch of our official documentation website. Interested readers can explore the full range of user manuals at ",(0,o.kt)("a",{parentName:"p",href:"https://gluesql.org/docs"},"https://gluesql.org/docs"),"."),(0,o.kt)("p",null,"Prior to this update, the only way to navigate GlueSQL was by manually inspecting the test code within the test suite. With the recent release, however, a comprehensive user manual has been made public to facilitate a more user-friendly experience. We hope that this new addition will prove beneficial to a broad spectrum of users."),(0,o.kt)("p",null,"The task of compiling an entire database manual in one go was daunting due to the sheer volume of content required. Surprisingly, this process turned out to be smoother than initially anticipated, largely due to the invaluable aid of ChatGPT, which was instrumental in automating much of the document creation. Specifically, around 80% of the SQL Syntax section was generated using this tool."),(0,o.kt)("p",null,"This remarkable feat was only possible due to the solid foundation of test codes previously established in GlueSQL. In this article, we'll share how we managed to leverage ChatGPT in such a unique way. Based on our recent experience of crafting documents grounded in testing, we've begun to consider the possibility of entirely automating document creation, save for the initial stages."),(0,o.kt)("p",null,"Along with sharing our journey so far, we will also reveal our plans for future test-based automation of documentation within GlueSQL."),(0,o.kt)("h2",{id:"test-codes-and-documentation"},"Test Codes and Documentation"),(0,o.kt)("p",null,"The GlueSQL project has placed a significant emphasis on writing test codes. This might be a given for a database project; however, the thoroughness of our approach is evident from our line coverage of nearly ",(0,o.kt)("strong",{parentName:"p"},"99%")," for core codes. While we devoted considerable effort to creating these test codes, our primary focus has always been on a different aspect: ensuring that anyone can quickly grasp the content of the tests and easily add new ones."),(0,o.kt)("p",null,"The intent here is to empower newcomers to GlueSQL to understand the functionality of the software solely by examining integration tests, even in the absence of a user manual."),(0,o.kt)("p",null,"The integration tests for GlueSQL can be found in the test-suite workspace. For example, here's an excerpt of the test code for the INSERT statement:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-rust"},'test_case!(insert, async move {\n    run!(\n        "\nCREATE TABLE Test (\n    id INTEGER DEFAULT 1,\n    num INTEGER NULL,\n    name TEXT NOT NULL,\n);"\n    );\n\n    test! {\n        name: "basic insert - single item",\n        sql: "INSERT INTO Test (id, num, name) VALUES (1, 2, \'Hi boo\');",\n        expected: Ok(Payload::Insert(1))\n    };\n\n\n    test! {\n        sql: "INSERT INTO Test VALUES(17, 30, \'Sullivan\');",\n        expected: Ok(Payload::Insert(1))\n    };\n\n    test! {\n        sql: "INSERT INTO Test (num, name) VALUES (28, \'Wazowski\');",\n        expected: Ok(Payload::Insert(1))\n    };\n\n    test! {\n        sql: "SELECT * FROM Test;",\n        expected: Ok(select!(\n            id  | num | name;\n            I64 | I64 | Str;\n            1     2     "Hi boo".to_owned();\n            3     9     "Kitty!".to_owned();\n            2     7     "Monsters".to_owned();\n            17    30    "Sullivan".to_owned();\n            1     28    "Wazowski".to_owned()\n        ))\n    };\n\n    // ...\n});\n')),(0,o.kt)("p",null,"Despite being written in Rust, these test cases are designed to be comprehensible, even to those unfamiliar with the language. Each test is a complete scenario from start to finish, and the results of each operation are readily observable."),(0,o.kt)("p",null,"Given that identifying results from SELECT operations in the form of Rust enums and structs can be challenging, we actively utilized macros such as ",(0,o.kt)("inlineCode",{parentName:"p"},"select!")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"select_with_null!"),". We've composed the test cases to demonstrate that the INSERT statement can handle a wide range of cases, including specifying all columns, omitting some, or omitting all."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-rust"},'test! {\n    sql: "INSERT INTO Test (id, num) VALUES (1, 10);",\n    expected: Err(InsertError::LackOfRequiredColumn("name".to_owned()).into())\n};\n')),(0,o.kt)("p",null,"The tests also include scenarios for expected faulty inputs, indicating the error returns in these situations."),(0,o.kt)("p",null,"By organizing the tests in this manner, we aim to make it easy for anyone to read and write tests. Our goal was for these tests to serve as \"documentation\" for GlueSQL contributors. At the time we were writing these tests, we didn't anticipate that they could actually become documentation themselves. But we've come to realize that they have extraordinary potential."),(0,o.kt)("h2",{id:"leveraging-chatgpt"},"Leveraging ChatGPT"),(0,o.kt)("p",null,"When we first embarked on writing the User Manual, we were overwhelmed by the sheer volume of content we had to generate. Around the same time, ChatGPT was gaining prominence, and we thought it might be worth trying out, if only to lighten our load slightly."),(0,o.kt)("p",null,"To our surprise, ChatGPT exceeded our expectations. If the test codes were well written, it was capable of automatically crafting an exceptional document based on them, capturing all essential details."),(0,o.kt)("p",null,"After several trials and errors, we settled on the following prompt for document generation. While it's still a challenge to use the same prompt for all documentation, we made minor modifications to suit different situations:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"I'm creating an SQL database documentation website, and I'd like you to help me with one of the pages that introduces the SQL syntax for GlueSQL.\n\n1. Please provide the response content in the \"markdown\" format, so I can copy and paste it directly. Keep this constraint in mind while writing.  \n2. Regardless of the language I use, I need the content written in English.  \n3. I will provide some test case code written in the Rust language, which contains SQL examples. Please write the documentation based on these examples, but feel free to change the table names, column names, and data types as needed. Don't include any Rust related content or text in the response. all the response code example should be in plain SQL. \n4. GlueSQL does not have the VARCHAR type. If you want to use that, please use TEXT instead. You don't need to mention this in the response. \n5. Wrap the entire response text using <pre> and </pre> tags so I can copy all the content easily. \n\nNow, I'd like you to write the following request:  \nSQL Statement - \"INSERT\" \n\nHere's an example test code you can refer to:\n\ntest_case!(insert, async move {\n    run!(...\n")),(0,o.kt)("p",null,"Generally, we used the template above, and copied and pasted the test code from our existing test-suite. We leveraged this method to harness our many tests to assist in the creation of the user manual. In the next section, we'll showcase a sample of the documentation generated in this manner. It's quite impressive."),(0,o.kt)("h2",{id:"success-case-automated-user-manual-of-gluesql"},"Success Case: Automated User Manual of GlueSQL"),(0,o.kt)("p",null,"Thanks to ChatGPT, the resulting INSERT document page can be viewed at the following link. It's important to note that we used ChatGPT 4 for this task. Version 3.5 wasn't quite up to the task, and using version 4 was the minimum requirement."),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://gluesql.org/docs/dev/sql-syntax/statements/data-manipulation/insert"},"https://gluesql.org/docs/dev/sql-syntax/statements/data-manipulation/insert")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"INSERT Statement",src:n(3601).Z,width:"2203",height:"1739"})),(0,o.kt)("p",null,"The results were quite impressive. ChatGPT neatly categorized the test cases, explained the syntax, outlined constraints, and provided appropriate examples. It didn't stop there; it also skillfully recognized error test cases and incorporated them into the documentation, as shown below."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"INSERT Statement",src:n(5611).Z,width:"1751",height:"353"})),(0,o.kt)("p",null,"Isn't it amazing?"),(0,o.kt)("h2",{id:"future-plans-fully-automating-documentation-generation"},"Future Plans: Fully Automating Documentation Generation"),(0,o.kt)("p",null,"While the current documentation is far from perfect and there are many aspects that can be improved, we see great potential in this approach. We believe it's entirely possible to automate the process of writing this kind of document, and writing in general."),(0,o.kt)("p",null,"In the past, documents like user manuals required a great deal of effort to maintain once they were written. If a document contained real code examples, verifying that the code still worked was often a tedious task. With the ability to automatically generate documentation as we have done here, these issues are no longer problematic."),(0,o.kt)("p",null,"Previously, you would have to write tests and then also document them separately. If you had to support multiple languages, that would be an additional task. With a tool like ChatGPT, you can automate all of this. All a developer has to do is write the tests. This alone can be sufficient. You can generate documents automatically based on the tests. Eventually, we can even support automatically translating these documents into multiple languages."),(0,o.kt)("p",null,"The GlueSQL project repository is currently hosted on GitHub and makes good use of various GitHub Actions. We envision a GitHub Action that automatically regenerates a document corresponding to a test when a user modifies the test and raises a Pull Request. Another GitHub Action could automatically translate updated documents into supported languages and create new Pull Requests. The possibilities are truly endless."),(0,o.kt)("p",null,"Not only will this help with document generation, but it will also provide clear guidelines for writing better test code. If we can automatically generate documents based on written tests, the quality of those documents can serve as an indicator of the quality of the tests themselves. This means that a document automation tool can play the role of a good reviewer for tests. It can greatly reduce the time and effort required for painstakingly reviewing the quality of each test. Developers can also write tests without pressure, evaluate their test code by looking at the generated document, and improve it."),(0,o.kt)("p",null,"Furthermore, multi-language support becomes a breeze. In my personal experience as a software engineer over the past decade, developing various products such as games, web services, and applications, I often needed to support multiple languages. Each time, there was no definite solution. The optimal approach varied depending on the situation, and there were many things to consider when entrusting translations, such as effectively communicating the context of the target service to the translator. Moreover, regularly updating content and having it retranslated into various languages was a very tedious process. While I tried to automate as much as possible by creating various tools, I was never fully satisfied. I believe ChatGPT can completely solve these issues. If there is a need to provide project-specific context, all you need to do is prepare a prompt in advance. Instead of having to rely on and wait for professional translators, we can now entrust this task to ChatGPT, and we only need a few people to review the translated content."),(0,o.kt)("p",null,"We are nearing a world where documentation is no longer a burden for developers."),(0,o.kt)("h2",{id:"conclusion-the-value-of-test-driven-documentation"},"Conclusion: The Value of Test-Driven Documentation"),(0,o.kt)("p",null,"The use of ChatGPT to generate documentation has proven a significant step forward in the GlueSQL user manual creation process. Through test-driven documentation, we've managed to automate a substantial part of the manual creation process, saving time and effort, and increasing accuracy."),(0,o.kt)("p",null,"Moreover, this process has unveiled a new potential for documentation: the possibility of fully automating document generation. We've seen that quality tests can become quality documentation with the help of AI, leading to more efficient workflows and possibly better test code as a result."),(0,o.kt)("p",null,"The journey doesn't stop here. We envision leveraging this capability further to auto-translate our documents into multiple languages, making our product more accessible to a global audience."),(0,o.kt)("p",null,"As we progress, we hope that our experience can inspire other developers to explore and embrace the benefits of AI-generated, test-driven documentation. It's not just about saving time\u2014it's about improving the way we work, communicate, and share knowledge."))}h.isMDXComponent=!0},5611:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/blog-test-driven-documentation-insert-errorcase-1be5ced205cee0d2eeb56af1591440ac.jpg"},3601:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/blog-test-driven-documentation-insert-7dfbb3a9123d4aa47b845b7dede97dc9.jpg"}}]);