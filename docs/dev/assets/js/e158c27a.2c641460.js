"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[321],{5680:(e,n,t)=>{t.d(n,{xA:()=>c,yg:()=>y});var a=t(6540);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var i=a.createContext({}),p=function(e){var n=a.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},c=function(e){var n=p(e.components);return a.createElement(i.Provider,{value:n},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},g=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=p(t),g=r,y=d["".concat(i,".").concat(g)]||d[g]||u[g]||o;return t?a.createElement(y,l(l({ref:n},c),{},{components:t})):a.createElement(y,l({ref:n},c))}));function y(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,l=new Array(o);l[0]=g;var s={};for(var i in n)hasOwnProperty.call(n,i)&&(s[i]=n[i]);s.originalType=e,s[d]="string"==typeof e?e:r,l[1]=s;for(var p=2;p<o;p++)l[p]=t[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,t)}g.displayName="MDXCreateElement"},7914:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var a=t(8168),r=(t(6540),t(5680));const o={sidebar_position:4},l="Transaction",s={unversionedId:"sql-syntax/statements/transaction",id:"sql-syntax/statements/transaction",title:"Transaction",description:"Transactions in SQL are a series of queries that are executed as a single unit of work. In GlueSQL, transactions help to ensure the consistency and integrity of the database. They follow the ACID properties: Atomicity, Consistency, Isolation, and Durability.",source:"@site/docs/sql-syntax/statements/transaction.md",sourceDirName:"sql-syntax/statements",slug:"/sql-syntax/statements/transaction",permalink:"/docs/dev/sql-syntax/statements/transaction",draft:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"autoSidebar",previous:{title:"DELETE",permalink:"/docs/dev/sql-syntax/statements/data-manipulation/delete"},next:{title:"SHOW TABLES",permalink:"/docs/dev/sql-syntax/statements/metadata/show-tables"}},i={},p=[{value:"BEGIN TRANSACTION",id:"begin-transaction",level:2},{value:"COMMIT TRANSACTION",id:"commit-transaction",level:2},{value:"ROLLBACK TRANSACTION",id:"rollback-transaction",level:2},{value:"Example",id:"example",level:2},{value:"Inserting Data",id:"inserting-data",level:3},{value:"Deleting Data",id:"deleting-data",level:3},{value:"Updating Data",id:"updating-data",level:3}],c={toc:p},d="wrapper";function u(e){let{components:n,...t}=e;return(0,r.yg)(d,(0,a.A)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"transaction"},"Transaction"),(0,r.yg)("p",null,"Transactions in SQL are a series of queries that are executed as a single unit of work. In GlueSQL, transactions help to ensure the consistency and integrity of the database. They follow the ACID properties: Atomicity, Consistency, Isolation, and Durability."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Note: In GlueSQL, transactions are an optional feature. Support for transactions depends on the storage engine being used. Currently, only ",(0,r.yg)("inlineCode",{parentName:"strong"},"SledStorage")," supports transactions, but there are plans to add support for other storage engines in the future. Transaction isolation levels may also vary depending on the storage engine. For example, the current transaction isolation level for ",(0,r.yg)("inlineCode",{parentName:"strong"},"SledStorage")," is SNAPSHOT ISOLATION.")),(0,r.yg)("h2",{id:"begin-transaction"},"BEGIN TRANSACTION"),(0,r.yg)("p",null,"To start a new transaction, use the ",(0,r.yg)("inlineCode",{parentName:"p"},"BEGIN")," keyword:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"BEGIN;\n")),(0,r.yg)("h2",{id:"commit-transaction"},"COMMIT TRANSACTION"),(0,r.yg)("p",null,"To permanently save the changes made during the transaction, use the ",(0,r.yg)("inlineCode",{parentName:"p"},"COMMIT")," keyword:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"COMMIT;\n")),(0,r.yg)("h2",{id:"rollback-transaction"},"ROLLBACK TRANSACTION"),(0,r.yg)("p",null,"To undo the changes made during the transaction and revert the database to its state before the transaction started, use the ",(0,r.yg)("inlineCode",{parentName:"p"},"ROLLBACK")," keyword:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"ROLLBACK;\n")),(0,r.yg)("h2",{id:"example"},"Example"),(0,r.yg)("p",null,"Consider the following table ",(0,r.yg)("inlineCode",{parentName:"p"},"TxTest")," with columns ",(0,r.yg)("inlineCode",{parentName:"p"},"id")," (INTEGER) and ",(0,r.yg)("inlineCode",{parentName:"p"},"name")," (TEXT):"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE TxTest (\n    id INTEGER,\n    name TEXT\n);\n")),(0,r.yg)("p",null,"Insert sample data into the table:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sql"},"INSERT INTO TxTest VALUES\n    (1, 'Friday'),\n    (2, 'Phone');\n")),(0,r.yg)("h3",{id:"inserting-data"},"Inserting Data"),(0,r.yg)("p",null,"Start a new transaction and insert a new row:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sql"},"BEGIN;\nINSERT INTO TxTest VALUES (3, 'New one');\n")),(0,r.yg)("p",null,"Rollback the transaction to undo the insertion:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sql"},"ROLLBACK;\n")),(0,r.yg)("p",null,"Now, start a new transaction and insert a new row with different data:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sql"},"BEGIN;\nINSERT INTO TxTest VALUES (3, 'Vienna');\nCOMMIT;\n")),(0,r.yg)("h3",{id:"deleting-data"},"Deleting Data"),(0,r.yg)("p",null,"Start a new transaction and delete a row:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sql"},"BEGIN;\nDELETE FROM TxTest WHERE id = 3;\nROLLBACK;\n")),(0,r.yg)("p",null,"The deletion will be undone due to the rollback. To permanently delete the row, commit the transaction:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sql"},"BEGIN;\nDELETE FROM TxTest WHERE id = 3;\nCOMMIT;\n")),(0,r.yg)("h3",{id:"updating-data"},"Updating Data"),(0,r.yg)("p",null,"Start a new transaction and update a row:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sql"},"BEGIN;\nUPDATE TxTest SET name = 'Sunday' WHERE id = 1;\nROLLBACK;\n")),(0,r.yg)("p",null,"The update will be undone due to the rollback. To permanently update the row, commit the transaction:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-sql"},"BEGIN;\nUPDATE TxTest SET name = 'Sunday' WHERE id = 1;\nCOMMIT;\n")))}u.isMDXComponent=!0}}]);