"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[9132],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>m});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var o=n.createContext({}),s=function(e){var t=n.useContext(o),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},c=function(e){var t=s(e.components);return n.createElement(o.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},f=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,l=e.originalType,o=e.parentName,c=u(e,["components","mdxType","originalType","parentName"]),d=s(r),f=a,m=d["".concat(o,".").concat(f)]||d[f]||p[f]||l;return r?n.createElement(m,i(i({ref:t},c),{},{components:r})):n.createElement(m,i({ref:t},c))}));function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=r.length,i=new Array(l);i[0]=f;var u={};for(var o in t)hasOwnProperty.call(t,o)&&(u[o]=t[o]);u.originalType=e,u[d]="string"==typeof e?e:a,i[1]=u;for(var s=2;s<l;s++)i[s]=r[s];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}f.displayName="MDXCreateElement"},5311:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>o,contentTitle:()=>i,default:()=>p,frontMatter:()=>l,metadata:()=>u,toc:()=>s});var n=r(7462),a=(r(7294),r(3905));const l={title:"Introduction",sidebar_position:1},i="AST Builder",u={unversionedId:"ast-builder/intro",id:"ast-builder/intro",title:"Introduction",description:"GlueSQL offers two ways to create and execute queries: using SQL statements or using the AST Builder. In this introductory page, we will focus on the AST Builder.",source:"@site/docs/ast-builder/intro.md",sourceDirName:"ast-builder",slug:"/ast-builder/intro",permalink:"/docs/canary/docs/ast-builder/intro",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Introduction",sidebar_position:1},sidebar:"astBuilderSidebar",next:{title:"Fetching Data from Storage",permalink:"/docs/canary/docs/ast-builder/querying-data/fetching-data-from-storage"}},o={},s=[{value:"CREATE TABLE",id:"create-table",level:3},{value:"INSERT",id:"insert",level:3},{value:"SELECT",id:"select",level:3},{value:"UPDATE",id:"update",level:3},{value:"SELECT with filtering",id:"select-with-filtering",level:3},{value:"DELETE",id:"delete",level:3},{value:"Summary",id:"summary",level:2}],c={toc:s},d="wrapper";function p(e){let{components:t,...r}=e;return(0,a.kt)(d,(0,n.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"ast-builder"},"AST Builder"),(0,a.kt)("p",null,"GlueSQL offers two ways to create and execute queries: using SQL statements or using the AST Builder. In this introductory page, we will focus on the AST Builder."),(0,a.kt)("p",null,"When executing SQL statements in GlueSQL, they need to be converted into an internal AST (Abstract Syntax Tree) format. The AST Builder allows users to directly create and manipulate ASTs, making it more efficient and flexible compared to traditional SQL statements."),(0,a.kt)("p",null,"The AST Builder has some similarities to ORM (Object Relational Mapping) query builders, but there are several key differences:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"ORM query builders often support multiple databases, which can limit their features to a subset of each database's capabilities. However, the AST Builder is designed exclusively for GlueSQL, allowing it to take full advantage of all GlueSQL features."),(0,a.kt)("li",{parentName:"ul"},"The AST Builder is flexible in terms of input, accepting both its own API calls and SQL expressions."),(0,a.kt)("li",{parentName:"ul"},"ORM query builders typically generate SQL statements, which must then be executed by the database. This introduces overhead. In contrast, the GlueSQL AST Builder directly generates executable ASTs, making it highly efficient."),(0,a.kt)("li",{parentName:"ul"},"The AST Builder supports features that are not available with SQL, such as allowing users to directly specify the internal execution strategy. This is similar to SQL query hints, but with the AST Builder, the user's instructions are executed precisely, rather than being treated as suggestions.")),(0,a.kt)("p",null,"Currently, the AST Builder only supports Rust language interfaces, but support for other languages, such as JavaScript, is planned for future releases."),(0,a.kt)("p",null,"Below are some sample code snippets using the GlueSQL AST Builder in Rust, categorized by query type:"),(0,a.kt)("h3",{id:"create-table"},"CREATE TABLE"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-rust"},'let actual = table("Foo")\n    .create_table()\n    .add_column("id INTEGER")\n    .add_column("name TEXT")\n    .execute(glue)\n    .await;\n')),(0,a.kt)("h3",{id:"insert"},"INSERT"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-rust"},'let actual = table("Foo")\n    .insert()\n    .columns("id, name")\n    .values(vec![\n        vec![num(100), text("Pickle")],\n        vec![num(200), text("Lemon")],\n    ])\n    .execute(glue)\n    .await;\n')),(0,a.kt)("h3",{id:"select"},"SELECT"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-rust"},'let actual = table("Foo")\n    .select()\n    .project("id, name")\n    .execute(glue)\n    .await;\n')),(0,a.kt)("h3",{id:"update"},"UPDATE"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-rust"},'let actual = table("Foo")\n    .update()\n    .set("id", col("id").mul(2))\n    .filter(col("id").eq(200))\n    .execute(glue)\n    .await;\n')),(0,a.kt)("h3",{id:"select-with-filtering"},"SELECT with filtering"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-rust"},'let actual = table("Foo")\n    .select()\n    .filter("name = \'Lemon\'")\n    .project("id, name")\n    .build()\n    .expect("build and execute")\n    .execute(glue)\n    .await;\n')),(0,a.kt)("h3",{id:"delete"},"DELETE"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-rust"},'let actual = table("Foo")\n    .delete()\n    .filter(col("id").gt(200))\n    .execute(glue)\n    .await;\n')),(0,a.kt)("h2",{id:"summary"},"Summary"),(0,a.kt)("p",null,"In this introduction to the AST Builder, we have covered the key differences between the AST Builder and ORM query builders, and provided examples of how to use the AST Builder in Rust for various query types. The AST Builder is a powerful and efficient tool for working with GlueSQL, offering greater flexibility and control compared to traditional SQL statements."),(0,a.kt)("p",null,"Remember that the AST Builder currently supports only Rust language interfaces, but support for other languages, such as JavaScript, is planned for future releases."),(0,a.kt)("p",null,"By leveraging the AST Builder, you can take full advantage of GlueSQL's features, and build more efficient and flexible database applications."))}p.isMDXComponent=!0}}]);