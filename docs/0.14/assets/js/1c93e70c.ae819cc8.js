"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8506],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>g});var a=n(7294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var u=a.createContext({}),s=function(e){var t=a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=s(e.components);return a.createElement(u.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,r=e.originalType,u=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=s(n),c=l,g=d["".concat(u,".").concat(c)]||d[c]||m[c]||r;return n?a.createElement(g,o(o({ref:t},p),{},{components:n})):a.createElement(g,o({ref:t},p))}));function g(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=n.length,o=new Array(r);o[0]=c;var i={};for(var u in t)hasOwnProperty.call(t,u)&&(i[u]=t[u]);i.originalType=e,i[d]="string"==typeof e?e:l,o[1]=i;for(var s=2;s<r;s++)o[s]=n[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},5429:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>o,default:()=>m,frontMatter:()=>r,metadata:()=>i,toc:()=>s});var a=n(7462),l=(n(7294),n(3905));const r={sidebar_position:4},o="Command-Line Interface",i={unversionedId:"getting-started/cli",id:"getting-started/cli",title:"Command-Line Interface",description:"Introduction",source:"@site/docs/getting-started/cli.md",sourceDirName:"getting-started",slug:"/getting-started/cli",permalink:"/docs/0.14/getting-started/cli",draft:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"autoSidebar",previous:{title:"Node.js",permalink:"/docs/0.14/getting-started/nodejs"},next:{title:"Introduction",permalink:"/docs/0.14/sql-syntax/intro"}},u={},s=[{value:"Introduction",id:"introduction",level:2},{value:"Installation",id:"installation",level:2},{value:"Running the CLI",id:"running-the-cli",level:2},{value:"--execute",id:"--execute",level:3},{value:"--path",id:"--path",level:3},{value:"--storage",id:"--storage",level:3},{value:"Dot command",id:"dot-command",level:2},{value:".show",id:"show",level:3},{value:".set",id:"set",level:3},{value:"Print options",id:"print-options",level:4},{value:".edit",id:"edit",level:3},{value:"With last executed SQL",id:"with-last-executed-sql",level:4},{value:"With PATH",id:"with-path",level:4},{value:".execute",id:"execute",level:3},{value:".run",id:"run",level:3},{value:"More commands",id:"more-commands",level:3},{value:"Migration using CLI",id:"migration-using-cli",level:2}],p={toc:s},d="wrapper";function m(e){let{components:t,...n}=e;return(0,l.kt)(d,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"command-line-interface"},"Command-Line Interface"),(0,l.kt)("h2",{id:"introduction"},"Introduction"),(0,l.kt)("p",null,"The Command-Line Interface (CLI) is a tool that allows interactive execution of SQL on GlueSQL. It supports Dot commands for more convenient use, and the .edit command allows immediate modification of query files, which can then be executed with .execute. In addition, it supports HTML table format output for SQL results, making it possible to use the results directly on the web."),(0,l.kt)("h2",{id:"installation"},"Installation"),(0,l.kt)("p",null,"To install the GlueSQL Command-Line Interface (CLI), run the following command:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ cargo install gluesql\n")),(0,l.kt)("h2",{id:"running-the-cli"},"Running the CLI"),(0,l.kt)("p",null,"Once you have installed the GlueSQL CLI, you can use it to interact with your database. The CLI has several options that you can use to customize your database configuration:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ gluesql [--execute ~/sql_path] [--path ~/data_path --storage={sled | json}]\n")),(0,l.kt)("h3",{id:"--execute"},"--execute"),(0,l.kt)("p",null,"This option allows you to execute a SQL query that is stored in a specific file path. You need to provide the path to the SQL file that contains the query you want to execute. For example, you can use the following command to execute a file located at ",(0,l.kt)("inlineCode",{parentName:"p"},"~/sql_path/query.sql")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"gluesql --execute ~/sql_path/query.sql\n")),(0,l.kt)("h3",{id:"--path"},"--path"),(0,l.kt)("p",null,"This option allows you to specify the path to your database's data directory. By default, GlueSQL stores your database in the current directory. However, you can use the --path option to specify a custom directory where you want to store your database files. For example, you can use the following command to specify a custom data directory ",(0,l.kt)("inlineCode",{parentName:"p"},"~/mydatabase"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"gluesql --path ~/mydatabase\n")),(0,l.kt)("h3",{id:"--storage"},"--storage"),(0,l.kt)("p",null,"This option allows you to specify the storage engine you want to use for your database. By default, GlueSQL uses the ",(0,l.kt)("a",{parentName:"p",href:"../storages/supported-storages/memory-storage"},(0,l.kt)("inlineCode",{parentName:"a"},"memory"))," storage engine. However, you can also use ",(0,l.kt)("a",{parentName:"p",href:"../storages/supported-storages/sled-storage"},(0,l.kt)("inlineCode",{parentName:"a"},"sled"))," or ",(0,l.kt)("a",{parentName:"p",href:"../storages/supported-storages/json-storage"},(0,l.kt)("inlineCode",{parentName:"a"},"json"))," storage engine by using the --storage option. Note that ",(0,l.kt)("inlineCode",{parentName:"p"},"sled")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"json")," should be with ",(0,l.kt)("inlineCode",{parentName:"p"},"--path")," option. For example, you can use the following command to specify the ",(0,l.kt)("inlineCode",{parentName:"p"},"json")," storage engine:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"gluesql --path ~/mydatabase --storage=json\n")),(0,l.kt)("h2",{id:"dot-command"},"Dot command"),(0,l.kt)("h3",{id:"show"},".show"),(0,l.kt)("p",null,"This command shows current ",(0,l.kt)("a",{parentName:"p",href:"#print-options"},"Print options"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'gluesql> .show all\ntabular ON\ncolsep "|"\ncolwrap ""\nheading ON\n')),(0,l.kt)("p",null,"or you can specify a option"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'gluesql> .show colsep\ncolsep "|"\n')),(0,l.kt)("h3",{id:"set"},".set"),(0,l.kt)("p",null,"This command can set each Print options"),(0,l.kt)("h4",{id:"print-options"},"Print options"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"command"),(0,l.kt)("th",{parentName:"tr",align:null},"description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"tabular {ON","|","OFF}"),(0,l.kt)("td",{parentName:"tr",align:null},"turn on/off html table format")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"colsep {SEPARATOR}"),(0,l.kt)("td",{parentName:"tr",align:null},"set column separator(",(0,l.kt)("inlineCode",{parentName:"td"},"tabular OFF")," only)")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"colwrap {WRAPPER}"),(0,l.kt)("td",{parentName:"tr",align:null},"set column wrapper(",(0,l.kt)("inlineCode",{parentName:"td"},"tabular OFF")," only)")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"heading {ON","|","OFF}"),(0,l.kt)("td",{parentName:"tr",align:null},"turn on/off heading")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"gluesql> VALUES (1, 'Glue'), (2, 'SQL');\n| column1 | column2 |\n|---------|---------|\n| 1       | Glue    |\n| 2       | SQL     |\n\ngluesql> .set tabular off\ngluesql> VALUES (1, 'Glue'), (2, 'SQL');\ncolumn1|column2\n1|Glue\n2|SQL\ngluesql> .set colsep ,\ngluesql> VALUES (1, 'Glue'), (2, 'SQL');\ncolumn1,column2\n1,Glue\n2,SQL\ngluesql> .set colwrap '\ngluesql> VALUES (1, 'Glue'), (2, 'SQL');\n'column1','column2'\n'1','Glue'\n'2','SQL'\ngluesql> .set heading off\ngluesql> VALUES (1, 'Glue'), (2, 'SQL');\n'1','Glue'\n'2','SQL'\n")),(0,l.kt)("h3",{id:"edit"},".edit"),(0,l.kt)("p",null,"This command open editor with last executed SQL or PATH"),(0,l.kt)("h4",{id:"with-last-executed-sql"},"With last executed SQL"),(0,l.kt)("p",null,"if you execute ",(0,l.kt)("inlineCode",{parentName:"p"},".edit"),", it opens specified (set on ",(0,l.kt)("inlineCode",{parentName:"p"},"$EDITOR")," env) or OS default editor."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"$ export $EDITOR=vi\n$ gluesql\ngluesql> VALUES (1, 'Glue'), (2, 'SQL');\n| column1 | column2 |\n|---------|---------|\n| 1       | Glue    |\n| 2       | SQL     |\ngluesql> .edit\n")),(0,l.kt)("p",null,"Last executed SQL is opened with ",(0,l.kt)("inlineCode",{parentName:"p"},"vi")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"--! /tmp/Glue_xxxxx.sql\nVALUES (1, 'Glue'), (2, 'SQL');\n")),(0,l.kt)("h4",{id:"with-path"},"With PATH"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"gluesql> .edit insert.sql\n")),(0,l.kt)("p",null,"It opens editor and shows the contents of ",(0,l.kt)("inlineCode",{parentName:"p"},"create_insert.sql")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"--! create_insert.sql\nCREATE TABLE Items (id INT, name TEXT);\nINSERT INTO Items VALUES (1, 'Glue'), (2, 'SQL');\n")),(0,l.kt)("h3",{id:"execute"},".execute"),(0,l.kt)("p",null,"This command executes SQL from PATH"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"gluesql> .execute create_insert.sql\nTable created\n\n2 rows inserted\n")),(0,l.kt)("h3",{id:"run"},".run"),(0,l.kt)("p",null,"This command executes last executed command again."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"gluesql> VALUES (1, 'Glue'), (2, 'SQL');\n| column1 | column2 |\n|---------|---------|\n| 1       | Glue    |\n| 2       | SQL     |\n\ngluesql> .run\n| column1 | column2 |\n|---------|---------|\n| 1       | Glue    |\n| 2       | SQL     |\n")),(0,l.kt)("p",null,"Also possible to combinate with ",(0,l.kt)("inlineCode",{parentName:"p"},".edit")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"gluesql> VALUES (1, 'Glue'), (2, 'SQL');\n| column1 | column2 |\n|---------|---------|\n| 1       | Glue    |\n| 2       | SQL     |\n\ngluesql> .edit\n")),(0,l.kt)("p",null,"edit to add ",(0,l.kt)("inlineCode",{parentName:"p"},"(3, 'Rust')")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"--! /tmp/Glue_xxxxxx.sql\nVALUES (1, 'Glue'), (2, 'SQL'), (3, 'Rust')\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"gluesql> .run\n| column1 | column2 |\n|---------|---------|\n| 1       | Glue    |\n| 2       | SQL     |\n| 3       | Rust    |\n")),(0,l.kt)("h3",{id:"more-commands"},"More commands"),(0,l.kt)("p",null,"If you execute ",(0,l.kt)("inlineCode",{parentName:"p"},".help"),", you can see various helper command starting with dot(",(0,l.kt)("inlineCode",{parentName:"p"},"."),")"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"command"),(0,l.kt)("th",{parentName:"tr",align:null},"description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},".help"),(0,l.kt)("td",{parentName:"tr",align:null},"show help")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},".quit"),(0,l.kt)("td",{parentName:"tr",align:null},"quit program")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},".tables"),(0,l.kt)("td",{parentName:"tr",align:null},"show table names")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},".functions"),(0,l.kt)("td",{parentName:"tr",align:null},"show function names")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},".columns TABLE"),(0,l.kt)("td",{parentName:"tr",align:null},"show columns from TABLE")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},".version"),(0,l.kt)("td",{parentName:"tr",align:null},"show version")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},".execute PATH"),(0,l.kt)("td",{parentName:"tr",align:null},"execute SQL from PATH")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},".spool PATH","|","off"),(0,l.kt)("td",{parentName:"tr",align:null},"spool to PATH or off")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},".show OPTION"),(0,l.kt)("td",{parentName:"tr",align:null},"show print option eg).show all")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},".set OPTION"),(0,l.kt)("td",{parentName:"tr",align:null},"set print option eg).set tabular off")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},".edit ","[PATH]"),(0,l.kt)("td",{parentName:"tr",align:null},"open editor with last command or PATH")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},".run"),(0,l.kt)("td",{parentName:"tr",align:null},"execute last command")))),(0,l.kt)("h2",{id:"migration-using-cli"},"Migration using CLI"),(0,l.kt)("p",null,"GlueSQL CLI supports generating SQL scripts for dumping whole schemas and data."),(0,l.kt)("p",null,"For instance, if you want to dump your database schema and data to a file named ",(0,l.kt)("inlineCode",{parentName:"p"},"dump.sql"),", you can use the following command:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ gluesql --path ~/glue_data --dump ./dump.sql\n")),(0,l.kt)("p",null,"This will create a SQL script in the current directory that you can use to recreate your database."),(0,l.kt)("p",null,"If you want to import the database from the ",(0,l.kt)("inlineCode",{parentName:"p"},"dump.sql")," file, you can use the following command:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ gluesql --execute ./dump.sql --path ~/new_data --storage=sled\n")),(0,l.kt)("p",null,"This will create a new database in the specified path, using the Sled Storage engine."),(0,l.kt)("p",null,"That's it! You now know how to use GlueSQL to migrate your database schema and data using the CLI."))}m.isMDXComponent=!0}}]);