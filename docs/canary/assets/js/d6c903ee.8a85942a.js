"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6519],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var u=a.createContext({}),s=function(e){var t=a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=s(e.components);return a.createElement(u.Provider,{value:t},e.children)},p="mdxType",g={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,u=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=s(n),d=r,m=p["".concat(u,".").concat(d)]||p[d]||g[d]||i;return n?a.createElement(m,o(o({ref:t},c),{},{components:n})):a.createElement(m,o({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=d;var l={};for(var u in t)hasOwnProperty.call(t,u)&&(l[u]=t[u]);l.originalType=e,l[p]="string"==typeof e?e:r,o[1]=l;for(var s=2;s<i;s++)o[s]=n[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},459:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>o,default:()=>g,frontMatter:()=>i,metadata:()=>l,toc:()=>s});var a=n(7462),r=(n(7294),n(3905));const i={sidebar_position:1},o="Fetching Data from Storage",l={unversionedId:"ast-builder/querying-data/fetching-data-from-storage",id:"ast-builder/querying-data/fetching-data-from-storage",title:"Fetching Data from Storage",description:"The AST Builder provides a powerful and flexible way to query data from your tables, similar to SQL's SELECT statement. This guide will show you how to use the AST Builder's table(\"foo\").select() method to perform various query types, including filtering, joining, grouping, ordering, and pagination.",source:"@site/docs/ast-builder/querying-data/fetching-data-from-storage.md",sourceDirName:"ast-builder/querying-data",slug:"/ast-builder/querying-data/fetching-data-from-storage",permalink:"/docs/ast-builder/querying-data/fetching-data-from-storage",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"astBuilderSidebar",previous:{title:"Introduction",permalink:"/docs/ast-builder/intro"},next:{title:"Using Preloaded Data",permalink:"/docs/ast-builder/querying-data/using-preloaded-data"}},u={},s=[{value:"Basic SELECT",id:"basic-select",level:2},{value:"Filtering (WHERE)",id:"filtering-where",level:2},{value:"Joining Tables",id:"joining-tables",level:2},{value:"Grouping and Aggregating (GROUP BY, HAVING)",id:"grouping-and-aggregating-group-by-having",level:2},{value:"Sorting Results (ORDER BY)",id:"sorting-results-order-by",level:2},{value:"Pagination (OFFSET, LIMIT)",id:"pagination-offset-limit",level:2}],c={toc:s},p="wrapper";function g(e){let{components:t,...n}=e;return(0,r.kt)(p,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"fetching-data-from-storage"},"Fetching Data from Storage"),(0,r.kt)("p",null,"The AST Builder provides a powerful and flexible way to query data from your tables, similar to SQL's SELECT statement. This guide will show you how to use the AST Builder's ",(0,r.kt)("inlineCode",{parentName:"p"},'table("foo").select()')," method to perform various query types, including filtering, joining, grouping, ordering, and pagination."),(0,r.kt)("h2",{id:"basic-select"},"Basic SELECT"),(0,r.kt)("p",null,"To perform a basic SELECT query using the AST Builder, simply call the ",(0,r.kt)("inlineCode",{parentName:"p"},"select()")," method on a table object."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'let actual = table("Category").select().execute(glue).await;\n')),(0,r.kt)("h2",{id:"filtering-where"},"Filtering (WHERE)"),(0,r.kt)("p",null,"To filter the results of a SELECT query, use the ",(0,r.kt)("inlineCode",{parentName:"p"},"filter()")," method, providing a condition as a string."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'let actual = table("Category")\n    .select()\n    .filter("name = \'Meat\'")\n    .execute(glue)\n    .await;\n')),(0,r.kt)("h2",{id:"joining-tables"},"Joining Tables"),(0,r.kt)("p",null,"You can join tables using the ",(0,r.kt)("inlineCode",{parentName:"p"},"join()")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"join_as()")," methods. The following example demonstrates an INNER JOIN:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'let actual = table("Item")\n    .alias_as("i")\n    .select()\n    .join_as("Category", "c")\n    .on("c.id = i.category_id")\n    .filter("c.name = \'Fruit\' OR c.name = \'Meat\'")\n    .project("i.name AS item")\n    .project("c.name AS category")\n    .execute(glue)\n    .await;\n')),(0,r.kt)("p",null,"For LEFT OUTER JOIN, use the ",(0,r.kt)("inlineCode",{parentName:"p"},"left_join()")," method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'let actual = table("Category")\n    .select()\n    .left_join("Item")\n    .on(col("Category.id")\n        .eq(col("Item.category_id"))\n        .and(col("price").gt(50)))\n    .project(vec![\n        "Category.name AS category",\n        "Item.name AS item",\n        "price",\n    ])\n    .execute(glue)\n    .await;\n')),(0,r.kt)("h2",{id:"grouping-and-aggregating-group-by-having"},"Grouping and Aggregating (GROUP BY, HAVING)"),(0,r.kt)("p",null,"To group the results of a SELECT query, use the ",(0,r.kt)("inlineCode",{parentName:"p"},"group_by()")," method. You can also filter the groups using the ",(0,r.kt)("inlineCode",{parentName:"p"},"having()")," method."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'let actual = table("Item")\n    .select()\n    .join("Category")\n    .on(col("Category.id").eq("Item.category_id"))\n    .group_by("Item.category_id")\n    .having("SUM(Item.price) > 80")\n    .project("Category.name AS category")\n    .project("SUM(Item.price) AS sum_price")\n    .execute(glue)\n    .await;\n')),(0,r.kt)("h2",{id:"sorting-results-order-by"},"Sorting Results (ORDER BY)"),(0,r.kt)("p",null,"To sort the results of a SELECT query, use the ",(0,r.kt)("inlineCode",{parentName:"p"},"order_by()")," method."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'let actual = table("Item")\n    .select()\n    .project("name, price")\n    .order_by("price DESC")\n    .execute(glue)\n    .await;\n')),(0,r.kt)("h2",{id:"pagination-offset-limit"},"Pagination (OFFSET, LIMIT)"),(0,r.kt)("p",null,"You can paginate the results of a SELECT query using the ",(0,r.kt)("inlineCode",{parentName:"p"},"offset()")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"limit()")," methods."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-rust"},'let actual = table("Item")\n    .select()\n    .project("name, price")\n    .order_by("price DESC")\n    .offset(1)\n    .limit(2)\n    .execute(glue)\n    .await;\n')))}g.isMDXComponent=!0}}]);